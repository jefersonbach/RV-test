<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <title>Jeff Bach Front End Test - Greenthumb</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    <link async href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
    
<!--   TIPS: Unnecessary   -->
    <link rel="preload" as="style" href="./index.scss" />

      <!--   SEO   -->
      <meta name="robots" content="all"/>
      <link rel="manifest" href="manifest.webmanifest">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
      <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
      <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
      <meta name="msapplication-TileColor" content="#75BC97">
      <meta name="msapplication-TileImage" content="images/favicon-32x32.png">
      <meta name="theme-color" content="#75BC97">
      <link rel="canonical" href="https://rv-test.vercel.app">
      <meta name="theme-color" content="#75BC97">
      <meta name="author" content="Jeferson Bach - Red Ventures Test">
      <meta name="description" content="Find your next green friend. Search for a ideal plant for you!">
      <link rel="shortlink" href="https://rv-test.vercel.app">
<!--   END TIPS   -->

      <link rel="stylesheet" href="./index.scss" />
  </head>

  <body>
    <header>
      <div class="wrap">
        <img id="logo" src="images/icons/logo-white.svg" alt="Greenthumb" />
      </div>
    </header>

<!-- Banner  -->
    <div id="banner-home">
      <div class="wrap">
        <div id="banner-text">
          <h1>Find your<br />next green<br />friend</h1>
          <!-- Animated with css -->
          <a href="#" id="banner-arrow-down" class="bounce">
            <img src="images/icons/arrow-down.svg" alt="Arrow Down" />
          </a>
        </div>
      </div>

      <div id="imagesBannerDesktop">
        <picture id="left-leaves" class="paralax" value="2">
          <source type="image/webp" srcset="images/hero/desktop/webp/left-leaves.webp">
          <source type="image/jpeg" srcset="images/hero/desktop/jp2/left-leaves.jp2">
          <img loading="lazy" src="images/hero/desktop/left-leaves.png" alt="Left Leaves" width="100%"  />
        </picture>

        <picture id="plantperson" class="paralax" value="1">
          <source type="image/webp" srcset="images/hero/desktop/webp/plantperson.webp">
          <source type="image/jpeg" srcset="images/hero/desktop/jp2/plantperson.jp2">
          <img loading="lazy" src="images/hero/desktop/plantperson.png" alt="Plant Person" height="100%"  />
        </picture>

        <picture id="right-leaves" class="paralax" value="-1">
          <source type="image/webp" srcset="images/hero/desktop/webp/right-leaves.webp">
          <source type="image/jpeg" srcset="images/hero/desktop/jp2/right-leaves.jp2">
          <img loading="lazy" src="images/hero/desktop/right-leaves.png" alt="Right Leaves" width="100%" />
        </picture>
      </div>

      <div id="imagesBannerMobile">
        <picture id="mobile-leaves" class="paralax" value="-1">
          <source type="image/webp" srcset="images/hero/mobile/webp/mobile-leaves.webp">
          <source type="image/jpeg" srcset="images/hero/mobile/jp2/mobile-leaves.jp2">
          <img loading="lazy" src="images/hero/mobile/mobile-leaves.png" alt="Mobile Leaves"  width="100%" />
        </picture>

        <picture id="mobile-plantperson" class="paralax" value="1">
          <source type="image/webp" srcset="images/hero/mobile/webp/mobile-plantperson.webp">
          <source type="image/jpeg" srcset="images/hero/mobile/jp2/mobile-plantperson.jp2">
          <img loading="lazy" src="images/hero/mobile/mobile-plantperson.png" alt="Plantperson"  width="90%" />
        </picture>
      </div>
    </div>


<!-- options box  -->
    <div class="wrap flex" id="optionsBox">
      <label>
        <picture>
          <source type="image/webp" srcset="images/illustrations/webp/sun.webp">
          <source type="image/jpeg" srcset="images/illustrations/jp2/sun.jp2">
          <img loading="lazy" src="images/illustrations/sun.png" alt="First step: Sun" />
        </picture><br />
        <span><strong>1.</strong> Set the amount of <strong>sunlight</strong> your plant will get.</span><br />
        <select id="selectSun" onChange="update()">
          <option>Select...</option>
          <option value="no">No</option>
          <option value="low">Low</option>
          <option value="high">High</option>
        </select>
      </label>
      <label>
        <picture>
          <source type="image/webp" srcset="images/illustrations/webp/wateringcan.webp">
          <source type="image/jpeg" srcset="images/illustrations/jp2/wateringcan.jp2">
          <img loading="lazy" src="images/illustrations/wateringcan.png" alt="Second step: wateringcan" />
        </picture><br />
        <span><strong>2.</strong> How often do you want to <strong>water</strong> your plant?</span><br />
        <select id="selectWater" onChange="update()">
          <option>Select...</option>
          <option value="regularly">Regularly</option>
          <option value="daily">Daily</option>
          <option value="rarely">Rarely</option>
        </select>
      </label>
      <label>
        <picture>
          <source type="image/webp" srcset="images/illustrations/webp/dog.webp">
          <source type="image/jpeg" srcset="images/illustrations/jp2/dog.jp2">
          <img loading="lazy" src="images/illustrations/dog.png" alt="Third step: Pet" />
        </picture><br />
        <span><strong>3.</strong> Do you have pets? Do they <strong>chew</strong> plants? </span><br />
        <select id="selectDog" onChange="update()">
          <option>Select...</option>
          <option value="false">No</option>
          <option value="true">Yes</option>
        </select>
      </label>
    </div>
    
<!-- Load results  -->
    <div id="results">
      <div class="wrap flex" id="noResults">
        <div>
          <h2>No results yet...</h2>
          <p>Use the filters above to find the plant that best fits your environment :)</p>
        </div>
        <div id="noResultsImg">
          <img src="images/icons/no-results.svg" alt="No Results" />
        </div>
      </div>

      <div class="wrap" id="showResults">
        <img src="images/illustrations/pick.png" id="iconPick" alt="Pick your plant" />
        <h2>Our picks for you</h2>
      
<!--   GET Content from API (api-request.js)   -->
        <div id="getContent"></div>
        
        <a href="#" id="backTop">
          <span>back to the top</span>
        </a>
      </div>
    </div>
    
  </body>
</html>

<!-- API CALL  -->
<script type="text/javascript">
  document.addEventListener("mousemove", parallax);
  function parallax(event) {
    this.querySelectorAll(".paralax").forEach((shift) => {
      const position = shift.getAttribute("value");
      const x = (window.innerWidth - event.pageX * position) / 90;
      const y = (window.innerHeight - event.pageY * position) / 90;

      shift.style.transform = `translateX(${x}px) translateY(${y}px)`;
    });
  }


  function update() {
      var sun = document.getElementById('selectSun').value;
      var water = document.getElementById('selectWater').value;
      var dog = document.getElementById('selectDog').value;
  
      var wrapContent = document.getElementById("getContent");
  
      // check if all selects received values
      if(sun != "Select..." && water != "Select..." && dog != "Select..."){
          document.getElementById('noResults').style.display = 'none';
              // Create a request
              var request = new XMLHttpRequest()
              // Open a new connection, using the GET request on the URL endpoint
              request.open('GET', 'https://front-br-challenges.web.app/api/v2/green-thumb/?sun='+sun+'&water='+water+'&pets='+dog+'', true)
  
              request.onload = function () {
              // Begin accessing JSON data here
                  var data = JSON.parse(this.response);
                  if (request.status >= 200 && request.status < 400) {
                      
                      wrapContent.innerHTML = "";
                      
                      data.forEach((plant) => {
                          var sunLight = '';
                          var favorite = '';
                          var waterVol = '';
                          var toxicity = '';
  
                          if(plant.staff_favorite){favorite = '<div class="staff">&#10024; Staff favorite</div>';}
                          if(plant.toxicity){
                              toxicity = '<span style="background-image: url(images/icons/toxic.svg)">Toxicity</span>';
                          }else{
                              toxicity = '<span style="background-image: url(images/icons/pet.svg)">Pet friendly</span>';
                          }
                              
                          
                          if(plant.sun == 'no'){
                              sunLight = '<span style="background-image: url(images/icons/no-sun.svg)">Sun light</span>';
                          }else if(plant.sun == 'low'){
                              sunLight = '<span style="background-image: url(images/icons/low-sun.svg)">Sun light</span>';
                          }else if(plant.sun == 'high'){
                              sunLight = '<span style="background-image: url(images/icons/high-sun.svg)">Sun light</span>';
                          }
  
                          if(plant.water == 'rarely'){
                              waterVol = '<span style="background-image: url(images/icons/1-drop.svg)">Water vol.</span>';
                          }else if(plant.water == 'daily'){
                              waterVol = '<span style="background-image: url(images/icons/2-drops.svg)">Water vol.</span>';
                          }else if(plant.water == 'regularly'){
                              waterVol = '<span style="background-image: url(images/icons/3-drops.svg)">Water vol.</span>';
                          }
  
  
                          wrapContent.insertAdjacentHTML( 'beforeend', '<div class="plantThumbs">  \
                              '+favorite+' \
                              <img src="'+plant.url+'" class="plantImg" /> \
                              <div class="plantInfo">\
                                  <h3>'+plant.name+'</h3> \
                              </div> \
                                  <div class="plantIcons"> \
                                      <strong>$'+plant.price+'</strong> \
                                      '+toxicity+' \
                                      '+sunLight+' \
                                      '+waterVol+' \
                                      <div class="control"></div> \
                                  </div> \
                          </div>' );
                      });
                      
                  } else {
                      return false;
                  }
              }
  
              // Send request
              request.send();
              document.getElementById('showResults').style.display = 'block';
              document.getElementById('results').scrollIntoView({block: "end", behavior: "smooth"});
              return true;
      }
      
  }
      </script>